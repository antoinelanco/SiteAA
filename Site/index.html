<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style_blog.css">
  <title>Hi AA</title>
</head>

<body>
  <div class="all-tags"></div>
  <div class="container">
    <script>
      (async () => {
        const response = await fetch('https://api.github.com/repos/antoinelanco/SiteAA/contents/Site/json');
        const data = await response.json();
        var allTags = new Set();
        var tagString = '';

        async function  create(file)  {
            const response_raw = await fetch(file.download_url);
            const data_raw = await response_raw.json();
            let htmlString = '<div class="card"> <div class="card-body"';
            htmlString += `<h2><a href="articles/${data_raw.url}">${data_raw.title}</a></h2>`;
            htmlString += " <br><p>";
            htmlString += data_raw.text;
            htmlString += "</p>";
            htmlString += '<span> Tags </span>';
            htmlString += '<p class="tags">';
            for (let t of data_raw.tags) {
              let temp = '<a href="#" class="tag">';
              temp += t;
              allTags.add(t);
              temp += '</a>';
              htmlString += temp;
            }
            htmlString += "</p>";

            htmlString += "</div>";
            document.getElementsByClassName('container')[0].innerHTML += htmlString;
        };

        for (let file of data) {
          await create (file);
          
        };
        for (tt of allTags) {
          let temp = '<a href="#" class="tag">';
          temp += tt;
          temp += '</a>';
          tagString += temp;
        };

        document.getElementsByClassName('all-tags')[0].innerHTML += tagString;

      })()
    </script>
  </div>
</body>

</html>